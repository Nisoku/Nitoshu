{"version":3,"file":"index-CPaGWUYQ.js","sources":["../../src/file_handlers.js","../../src/main.js"],"sourcesContent":["if (\"launchQueue\" in window && \"files\" in LaunchParams.prototype) {\n    window.launchQueue.setConsumer(async (launchParams) => {\n      if (!launchParams.files || launchParams.files.length === 0) return;\n  \n      // Open all files provided (let manifest file_handlers restrict type/extension)\n      for (const fileHandle of launchParams.files) {\n        try {\n          const file = await fileHandle.getFile();\n          window.readFile(file);\n        } catch (err) {\n          alert(`Failed to open file: ${err}`);\n        }\n      }\n    });\n  }","import './file_handlers.js';\n\nconst editor = document.getElementById(\"editor\");\nconst fileInput = document.getElementById(\"file-input\");\nconst filenameInput = document.getElementById(\"filename-input\");\nconst charCount = document.getElementById(\"char-count\");\nconst saveStatus = document.getElementById(\"save-status\");\n\neditor.addEventListener(\"input\", () => {\n  const len = editor.value.length;\n  charCount.textContent = `${len} character${len !== 1 ? \"s\" : \"\"}`;\n  saveStatus.textContent = \"Unsaved changes\";\n});\n\nfunction triggerLoad() {\n  fileInput.click();\n}\n\nfunction loadFile(input) {\n  const file = input.files[0];\n  if (!file) return;\n  readFile(file);\n}\n\n// Drag and Drop Support\ndocument.body.addEventListener(\"dragover\", (e) => {\n  e.preventDefault();\n  editor.style.backgroundColor = \"#f9f9f9\";\n});\n\ndocument.body.addEventListener(\"dragleave\", (e) => {\n  e.preventDefault();\n  editor.style.backgroundColor = \"#ffffff\";\n});\n\ndocument.body.addEventListener(\"drop\", (e) => {\n  e.preventDefault();\n  editor.style.backgroundColor = \"#ffffff\";\n  if (e.dataTransfer.files.length > 0) {\n    readFile(e.dataTransfer.files[0]);\n  }\n});\n\nfunction readFile(file) {\n  const reader = new FileReader();\n  reader.onload = (e) => {\n    editor.value = e.target.result;\n    filenameInput.value = file.name;\n    const len = editor.value.length;\n    charCount.textContent = `${len} character${len !== 1 ? \"s\" : \"\"}`;\n    saveStatus.textContent = \"Loaded: \" + file.name;\n  };\n  reader.readAsText(file);\n}\n\nfunction saveFile() {\n  const content = editor.value;\n  const filename = filenameInput.value || \"Untitled.txt\";\n\n  const blob = new Blob([content], { type: \"text/plain\" });\n  const link = document.createElement(\"a\");\n  link.href = URL.createObjectURL(blob);\n  link.download = filename;\n\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  setTimeout(() => URL.revokeObjectURL(link.href), 100);\n  saveStatus.textContent = \"Saved to Downloads\";\n\n  setTimeout(() => {\n    saveStatus.textContent = \"Ready\";\n  }, 2000);\n}\n\n// Keyboard Shortcuts\n\ndocument.addEventListener(\"keydown\", (e) => {\n  // Save: Ctrl+S or Cmd+S\n  if ((e.ctrlKey || e.metaKey) && e.key === \"s\") {\n    e.preventDefault();\n    saveFile();\n  }\n  // Open: Ctrl+O or Cmd+O\n  if ((e.ctrlKey || e.metaKey) && e.key === \"o\") {\n    e.preventDefault();\n    triggerLoad();\n  }\n});\n\n// Expose these functions for on* HTML events\nwindow.triggerLoad = triggerLoad;\nwindow.saveFile = saveFile;\nwindow.loadFile = loadFile;\nwindow.readFile = readFile;"],"names":["launchParams","fileHandle","file","err","editor","fileInput","filenameInput","charCount","saveStatus","len","triggerLoad","loadFile","input","readFile","reader","e","saveFile","content","filename","blob","link"],"mappings":"ssBAAI,gBAAiB,QAAU,UAAW,aAAa,WACnD,OAAO,YAAY,YAAY,MAAOA,GAAiB,CACrD,GAAI,GAACA,EAAa,OAASA,EAAa,MAAM,SAAW,GAGzD,UAAWC,KAAcD,EAAa,MACpC,GAAI,CACF,MAAME,EAAO,MAAMD,EAAW,QAAO,EACrC,OAAO,SAASC,CAAI,CACtB,OAASC,EAAK,CACZ,MAAM,wBAAwBA,CAAG,EAAE,CACrC,CAEJ,CAAC,ECXL,MAAMC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAgB,SAAS,eAAe,gBAAgB,EACxDC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAa,SAAS,eAAe,aAAa,EAExDJ,EAAO,iBAAiB,QAAS,IAAM,CACrC,MAAMK,EAAML,EAAO,MAAM,OACzBG,EAAU,YAAc,GAAGE,CAAG,aAAaA,IAAQ,EAAI,IAAM,EAAE,GAC/DD,EAAW,YAAc,iBAC3B,CAAC,EAED,SAASE,GAAc,CACrBL,EAAU,MAAK,CACjB,CAEA,SAASM,EAASC,EAAO,CACvB,MAAMV,EAAOU,EAAM,MAAM,CAAC,EACrBV,GACLW,EAASX,CAAI,CACf,CAGA,SAAS,KAAK,iBAAiB,WAAa,GAAM,CAChD,EAAE,eAAc,EAChBE,EAAO,MAAM,gBAAkB,SACjC,CAAC,EAED,SAAS,KAAK,iBAAiB,YAAc,GAAM,CACjD,EAAE,eAAc,EAChBA,EAAO,MAAM,gBAAkB,SACjC,CAAC,EAED,SAAS,KAAK,iBAAiB,OAAS,GAAM,CAC5C,EAAE,eAAc,EAChBA,EAAO,MAAM,gBAAkB,UAC3B,EAAE,aAAa,MAAM,OAAS,GAChCS,EAAS,EAAE,aAAa,MAAM,CAAC,CAAC,CAEpC,CAAC,EAED,SAASA,EAASX,EAAM,CACtB,MAAMY,EAAS,IAAI,WACnBA,EAAO,OAAUC,GAAM,CACrBX,EAAO,MAAQW,EAAE,OAAO,OACxBT,EAAc,MAAQJ,EAAK,KAC3B,MAAMO,EAAML,EAAO,MAAM,OACzBG,EAAU,YAAc,GAAGE,CAAG,aAAaA,IAAQ,EAAI,IAAM,EAAE,GAC/DD,EAAW,YAAc,WAAaN,EAAK,IAC7C,EACAY,EAAO,WAAWZ,CAAI,CACxB,CAEA,SAASc,GAAW,CAClB,MAAMC,EAAUb,EAAO,MACjBc,EAAWZ,EAAc,OAAS,eAElCa,EAAO,IAAI,KAAK,CAACF,CAAO,EAAG,CAAE,KAAM,aAAc,EACjDG,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO,IAAI,gBAAgBD,CAAI,EACpCC,EAAK,SAAWF,EAEhB,SAAS,KAAK,YAAYE,CAAI,EAC9BA,EAAK,MAAK,EACV,SAAS,KAAK,YAAYA,CAAI,EAE9B,WAAW,IAAM,IAAI,gBAAgBA,EAAK,IAAI,EAAG,GAAG,EACpDZ,EAAW,YAAc,qBAEzB,WAAW,IAAM,CACfA,EAAW,YAAc,OAC3B,EAAG,GAAI,CACT,CAIA,SAAS,iBAAiB,UAAY,GAAM,EAErC,EAAE,SAAW,EAAE,UAAY,EAAE,MAAQ,MACxC,EAAE,eAAc,EAChBQ,EAAQ,IAGL,EAAE,SAAW,EAAE,UAAY,EAAE,MAAQ,MACxC,EAAE,eAAc,EAChBN,EAAW,EAEf,CAAC,EAGD,OAAO,YAAcA,EACrB,OAAO,SAAWM,EAClB,OAAO,SAAWL,EAClB,OAAO,SAAWE"}